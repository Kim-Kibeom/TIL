## DDL, DML, DCL, TCL

-   DDL

    -   Data Definition Language / 데이터 정의어

    -   직접 데이터베이스의 테이블에 영향을 주기 때문에 DDL 명령어를 입력하는 순간, 해당 작업이 auto commit 된다.

    -   종류

        Create : 데이터베이스의 객체를 생성

        Alter : 데이터베이스의 객체를 변경

        Rename : 데이터베이스의 객체이름을 변경

        Drop : 데이터베이스의 객체를 삭제

        Comment : 데이터에 주석 등을 추가

        Truncate : 테이블에 할당된 모든 공간을 포함하여 레코드를 제거

-   DML

    -   Data Manipulation Language / 데이터 조작어

    -   조작하려는 테이블을 메모리 버퍼에 올려놓고 작업하기 때문에 실시간으로 테이블에 영향을 주진 않는다. 따라서 commit을 입력해 트랜잭션을 종료해야 한다. 하지만 SQL server의 경우 DML도 auto commit으로 처리되기 때문에 commit을 입력하지 않아도 된다.
    -   종류

        Select : 조회

        Insert : 삽입

        Update : 수정

        Delete : 삭제

-   DCL

    -   Data Control Language / 데이터 제어어

    -   직접 데이터베이스의 테이블에 영향을 주기 때문에 DDL 명령어를 입력하는 순간, 해당 작업이 auto commit 된다.

    -   종류

        Grant : 데이터베이스에 대한 사용자의 엑세스 권한을 제공
        (특정 사용자만 특정 작업을 할 수 있도록 지정 가능 )

        Revoke : grant 명령으로 주어진 엑세스 권한을 철회

-   TCL

    -   Transaction Control Language / 트랜잭션 제어 언어

    -   종류

        **Commit** : 트랙잭션의 작업 결과를 저장하여 반영

        **Rollback** : 데이터베이스를 마지막 commit 된 상태로 복원

        **Savepoint** : 저장점을 정의하고 트랙잭션 롤백할 경우 트랜잭션에 포함된 전체 작업을 롤백하는 것이 아닌 저장점까지 트랜잭션 일부만 롤백할 수 있다. 복수의 저장점을 생성할 수 있고 이름이 같다면 마지막 저장점만이 유효

        **Set transaction** : 트랙잭션 지정

## 정규화란 무엇인가

-   이상현상(anomaly)을 해결하기 위해 속성들 끼리의 종속 관계를 분석하여 여러 개의 릴레이션으로 분해하는 과정이다.

-   이상현상

    -   이상 현상은 한 개의 릴레이션에 두 개 이상의 속성이 포함되어 있고 기본키가 아닌 속성이 결정자일 때 발생한다. 종류는 아래와 같다.

    -   삽입이상 : 데이터를 저장할 때 원하지 않는 정보가 함께 삽입되는 경우

    -   갱신이상 : 중복된 튜플 중 일부의 속성만 갱신 시킴으로써 정보의 모순성이 발생하는 경우

    -   삭제이상 : 튜플을 삭제하면서 유지되어야 하는 정보까지도 연쇄적으로 삭제되는 경우

        <img width="410" alt="image" src="https://user-images.githubusercontent.com/60914379/153221294-1a222d35-edbe-45f1-9b5b-b3372d991469.png">

        장미란 학생의 정보를 지우면 강의실 103도 같이 사라지게 되어다른 튜플들이 강의실 103을 사용하지 못하는 경우 - 삭제 이상
        박지성과 데이터베이스 수업을 듣는 강의실 110의 정보를 210호로 수정하면 같은 수업을 듣는 김연아와 같은 수업이지만 강의실은 다르게 되는 모순이 발생 - 수정 이상
        새로운 학생이 수강신청을 하여 데이터베이스에 저장하려고 했지만 아직 강의실이 정해지지 않아 원하지 않는 값을 넣어두어야 함 - 삽입 이상
        이런 현상은 서로 공유하는 데이터임에도 각각의 튜플에 독립적으로 존재하기 때문에 발생한다. 그러므로 테이블을 분리하여 그 테이블을 통해 참고하게 하여 이상현상을 해결할 수 있다.

    -   정규화

        -   제 1 정규화
            모든 속성 값이 원자값(하나의 값)을 가지도록 테이블을 분해하는 것

            ![image](https://user-images.githubusercontent.com/60914379/153220759-fc3f495d-6290-4ec0-aec3-574b7a92846e.png)

            ![image](https://user-images.githubusercontent.com/60914379/153220941-eb60cbad-4f2a-4bdc-b041-4d3ac65f319e.png)

            위와 같이 원자 값을 가지지 못하는 경우 이를 원자 값을 가질 수 있게 분해하여 제1 정규화 해준다.

        -   제 2 정규화

            제 1 정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해하는 것이다. 여기서 완전 함수 종속이란 기본키의 부분집합이 결정자가 되면 안된다는 의미이다.

            -   함수적 종속이란? - 어떤 속성 A의 값을 알면 다른 속성 B의 값이 유일하게 정해지는 관계를 종속이라고 한다.

            -   A→B로 표시하고 A가 B의 결정자가 된다.

                <img width="410" alt="image" src="https://user-images.githubusercontent.com/60914379/153221495-e044a3aa-511b-45cc-8c85-d9ebfcf6de9f.png">

                ![image](https://user-images.githubusercontent.com/60914379/153221663-012a2a60-9ddc-4809-9a1f-267631afb86b.png)

                위의 테이블의 기본키는 학생 번호와 강좌이름의 복합키이다. 그러나 강의실은 강좌이름에 의해 결정되므로 기본키의 부분집합인 강좌이름이 결정자이기 때문에 분해해야 한다. 따라서 강좌이름과 강의실 테이블을 따로 분리해주어야 한다.

                ![image](https://user-images.githubusercontent.com/60914379/153221727-2d6c6bfe-634d-4c0f-9707-8d338f638718.png)

        -   제 3 정규화

            제 2 정규화를 진행한 테이블에 대해 이행적 종속가 없게 테이블을 분해하는 것이다. 이행적 종속이란 X→Y, Y→Z ⇒ X→Z 가 되는 것을 의미한다.

            ![image](https://user-images.githubusercontent.com/60914379/153221799-311fed44-33ae-43fd-9f1b-831ff73724dd.png)

            위 테이블을 보게 되면 학생 번호는 강좌이름을 결정하고 강좌 이름은 수강료를 결정한다. 즉 이행 종속인 관계이다. 따라서 이는 학생번호와 강좌이름, 강좌이름과 수강료 테이블로 분해해야 한다.

            ![image](https://user-images.githubusercontent.com/60914379/153221864-7267f5ae-fef8-4de1-9aea-6c987836ab47.png)
